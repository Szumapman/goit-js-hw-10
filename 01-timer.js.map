{"version":3,"file":"01-timer.js","sources":["../src/img/toast-error.svg","../src/js/01-timer.js"],"sourcesContent":["export default \"data:image/svg+xml,%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2032%2032'%3e%3cpath%20fill='%23fafafb'%20d='M9.080%200.292c0.187-0.187%200.441-0.292%200.706-0.292h12.428c0.265%200%200.519%200.105%200.706%200.292l8.788%208.788c0.187%200.187%200.292%200.441%200.292%200.706v12.428c0%200.265-0.105%200.519-0.292%200.706l-8.788%208.788c-0.187%200.187-0.441%200.292-0.706%200.292h-12.428c-0.265%200-0.519-0.105-0.706-0.292l-8.788-8.788c-0.187-0.187-0.292-0.441-0.292-0.706v-12.428c0-0.265%200.105-0.519%200.292-0.706l8.788-8.788zM10.2%202l-8.2%208.2v11.6l8.2%208.2h11.6l8.2-8.2v-11.6l-8.2-8.2h-11.6z'%3e%3c/path%3e%3cpath%20fill='%23fafafb'%20d='M9.292%209.292c0.093-0.093%200.203-0.167%200.325-0.217s0.252-0.076%200.383-0.076c0.132%200%200.262%200.026%200.383%200.076s0.232%200.124%200.325%200.217l5.292%205.294%205.292-5.294c0.093-0.093%200.203-0.167%200.325-0.217s0.252-0.076%200.383-0.076c0.131%200%200.262%200.026%200.383%200.076s0.232%200.124%200.325%200.217c0.093%200.093%200.167%200.203%200.217%200.325s0.076%200.252%200.076%200.383-0.026%200.262-0.076%200.383c-0.050%200.121-0.124%200.232-0.217%200.325l-5.294%205.292%205.294%205.292c0.093%200.093%200.167%200.203%200.217%200.325s0.076%200.252%200.076%200.383-0.026%200.262-0.076%200.383c-0.050%200.121-0.124%200.232-0.217%200.325s-0.203%200.167-0.325%200.217c-0.121%200.050-0.252%200.076-0.383%200.076s-0.262-0.026-0.383-0.076c-0.121-0.050-0.232-0.124-0.325-0.217l-5.292-5.294-5.292%205.294c-0.093%200.093-0.203%200.167-0.325%200.217s-0.252%200.076-0.383%200.076-0.262-0.026-0.383-0.076c-0.121-0.050-0.232-0.124-0.325-0.217s-0.167-0.203-0.217-0.325c-0.050-0.121-0.076-0.252-0.076-0.383s0.026-0.262%200.076-0.383c0.050-0.121%200.124-0.232%200.217-0.325l5.294-5.292-5.294-5.292c-0.093-0.093-0.167-0.203-0.217-0.325s-0.076-0.252-0.076-0.383c0-0.132%200.026-0.262%200.076-0.383s0.124-0.232%200.217-0.325z'%3e%3c/path%3e%3c/svg%3e\"","import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport \"../css/01-timer.css\";\nimport iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport toastErrorIcon from '../img/toast-error.svg';\n\nconst datePickerInput = document.querySelector(\"#datetime-picker\");\nconst startBtn = document.querySelector(\"button[data-start]\");\nconst daysSpan = document.querySelector(\"span[data-days]\");\nconst hoursSpan = document.querySelector(\"span[data-hours]\");\nconst minutesSpan = document.querySelector(\"span[data-minutes]\");\nconst secondsSpan = document.querySelector(\"span[data-seconds]\");\n\nstartBtn.disabled = true;\n\nlet userSelectedDate;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {  \n    if (selectedDates[0] > new Date()) {\n        userSelectedDate = selectedDates[0];\n        startBtn.disabled = false;\n        const startButtonCheckerInterval = setInterval(() => {\n            if (userSelectedDate < new Date()) {\n                startBtn.disabled = true;\n                userSelectedDate = null;\n                clearInterval(startButtonCheckerInterval);\n            }\n        }, 1_000);\n    } else {\n        iziToast.error({\n            position: 'topRight',\n            iconUrl: toastErrorIcon,\n            message: \"Please choose a date in the future\",\n            backgroundColor: \"#EF4040\",\n            messageColor: \"white\",\n            progressBarColor: \"#B51B1B\",\n        });\n    }   \n  },\n};\n\nconst fp = flatpickr(datePickerInput, options);\nsetInterval(() => {\n    if (!fp.isOpen && !userSelectedDate) {        \n        fp.setDate(new Date(), false);\n    }\n}, 1_000);\n\nstartBtn.addEventListener(\"click\", () => {\n    if (userSelectedDate) {\n        startBtn.disabled = true;\n        datePickerInput.disabled = true;\n        return startTimer();\n    }\n});\n\nfunction startTimer() {\n    const timerInterval = setInterval(() => {\n        const remainigTime = userSelectedDate.getTime() - Date.now();\n        if (remainigTime <= 0) {\n            userSelectedDate = null;\n            datePickerInput.disabled = false;\n            clearInterval(timerInterval);\n            return;\n        }\n        const { days, hours, minutes, seconds } = convertMs(remainigTime);\n        daysSpan.textContent = addLeadingZero(days);\n        hoursSpan.textContent = addLeadingZero(hours);\n        minutesSpan.textContent = addLeadingZero(minutes);\n        secondsSpan.textContent = addLeadingZero(seconds);\n    }, 1_000);\n}\n\nfunction addLeadingZero(value) {\n    return value.toString().padStart(2, \"0\");\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}"],"names":["toastErrorIcon","datePickerInput","startBtn","daysSpan","hoursSpan","minutesSpan","secondsSpan","userSelectedDate","options","selectedDates","startButtonCheckerInterval","iziToast","fp","flatpickr","startTimer","timerInterval","remainigTime","days","hours","minutes","seconds","convertMs","addLeadingZero","value","ms"],"mappings":"0IAAA,MAAeA,EAAA,u5DCQTC,EAAkB,SAAS,cAAc,kBAAkB,EAC3DC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAW,SAAS,cAAc,iBAAiB,EACnDC,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAc,SAAS,cAAc,oBAAoB,EAE/DJ,EAAS,SAAW,GAEpB,IAAIK,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,GAAIA,EAAc,CAAC,EAAI,IAAI,KAAQ,CAC/BF,EAAmBE,EAAc,CAAC,EAClCP,EAAS,SAAW,GACpB,MAAMQ,EAA6B,YAAY,IAAM,CAC7CH,EAAmB,IAAI,OACvBL,EAAS,SAAW,GACpBK,EAAmB,KACnB,cAAcG,CAA0B,EAE/C,EAAE,GAAK,CAChB,MACQC,EAAS,MAAM,CACX,SAAU,WACV,QAASX,EACT,QAAS,qCACT,gBAAiB,UACjB,aAAc,QACd,iBAAkB,SAC9B,CAAS,CAEN,CACH,EAEMY,EAAKC,EAAUZ,EAAiBO,CAAO,EAC7C,YAAY,IAAM,CACV,CAACI,EAAG,QAAU,CAACL,GACfK,EAAG,QAAQ,IAAI,KAAQ,EAAK,CAEpC,EAAG,GAAK,EAERV,EAAS,iBAAiB,QAAS,IAAM,CACrC,GAAIK,EACA,OAAAL,EAAS,SAAW,GACpBD,EAAgB,SAAW,GACpBa,EAAU,CAEzB,CAAC,EAED,SAASA,GAAa,CAClB,MAAMC,EAAgB,YAAY,IAAM,CACpC,MAAMC,EAAeT,EAAiB,QAAS,EAAG,KAAK,IAAG,EAC1D,GAAIS,GAAgB,EAAG,CACnBT,EAAmB,KACnBN,EAAgB,SAAW,GAC3B,cAAcc,CAAa,EAC3B,MACH,CACD,KAAM,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAY,EAChEb,EAAS,YAAcmB,EAAeL,CAAI,EAC1Cb,EAAU,YAAckB,EAAeJ,CAAK,EAC5Cb,EAAY,YAAciB,EAAeH,CAAO,EAChDb,EAAY,YAAcgB,EAAeF,CAAO,CACnD,EAAE,GAAK,CACZ,CAEA,SAASE,EAAeC,EAAO,CAC3B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CAC3C,CAEA,SAASF,EAAUG,EAAI,CAQrB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAE1BN,EAAQ,KAAK,MAAOM,EAAK,MAAO,IAAI,EAEpCL,EAAU,KAAK,MAAQK,EAAK,MAAO,KAAQ,GAAM,EAEjDJ,EAAU,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}